cmake_minimum_required(VERSION ${MY_CMAKE_VERSION})

project(cmsis-posix-project
	LANGUAGES C CXX
)
set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON) 
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Wextra -Wno-long-long -pedantic")

find_package(GTest REQUIRED)
include(GoogleTest)

add_executable(cmsis-test 
	api_test/main.cpp
	api_test/cmsis_thread_test.c
	api_test/cmsis_generic_test.c
	api_test/cmsis_kernel_test.c
	api_test/cmsis_message_queue_test.c
	api_test/cmsis_semaphores_test.c
	api_test/cmsis_mutexes_test.c
	fw/autosar_os_ext_testfw.c
)

target_include_directories(
	cmsis-test 
	PRIVATE ${PROJECT_SOURCE_DIR}/api_test
	PRIVATE ${PROJECT_SOURCE_DIR}/fw
	PRIVATE ${GTEST_INCLUDE_DIRS}
)

target_link_libraries(cmsis-test cmsis pthread GTest::GTest)
